<source>
  @type kafka
  brokers Kafka00Service:9092,Kafka01Service:9092,Kafka02Service:9092
  topics pip
  format json
#   message_key <key (Optional, for text format only, default is message)>
#   add_prefix <tag prefix (Optional)>
#   add_suffix <tag suffix (Optional)>

  # Optionally, you can manage topic offset by using zookeeper
#   offset_zookeeper    <zookeer node list (<zookeeper1_host>:<zookeeper1_port>,<zookeeper2_host>:<zookeeper2_port>,..)>
#   offset_zk_root_node <offset path in zookeeper> default => '/fluent-plugin-kafka'

   # ruby-kafka consumer options
#   max_bytes     (integer) :default => nil (Use default of ruby-kafka)
#   max_wait_time (integer) :default => nil (Use default of ruby-kafka)
#   min_bytes     (integer) :default => nil (Use default of ruby-kafka)
</source>


<match pip>
  @type s3
  aws_key_id Z8QCI7UAOC4NP9F841NP
  aws_sec_key eWhtoNDgDOs5W7K80eDNhklKuo9d0GAvIzUi5myt
  s3_endpoint http://baobab.ncsoft.com
  s3_bucket inspire12
  s3_region default

  path inspire12/%Y%m%d/
  time_slice_format %Y%m%d%
  s3_object_key_format %{path}%{time_slice}_%{index}.%{file_extension}

  # if you want to use ${tag} or %Y/%m/%d/ like syntax in path / s3_object_key_format,
  # need to specify tag for ${tag} and time for %Y/%m/%d in <buffer> argument.

  <buffer tag,time>
    @type file
    path /fluentd/log
    timekey 1800 # 30m
    %Y/%m/%d
    timekey_wait 10m # 같은 log chunk의 딜레이되는 로그 라인이 유실되지 않도록
    timekey_use_utc true # use utc
  </buffer>
  <format>
    @type json
  </format>
</match>
<match **>
  @type stdout
</match>

